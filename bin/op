#!/usr/bin/env python3.4
import os.path
import sys
import magic
import mimetypes as mt
from subprocess import call
import subprocess as sb

def check_arg(arg):
    if os.path.isfile(arg):
        return True
    elif "-h" in arg or "help" in arg:
        print("Just type this command with the file you want to open.\n")
    else:
        return False

def check_extension_and_open(path):
    mime_t = str(magic.from_file(path, mime=True).strip())
    #print(mime_t)
    if "pdf" in mime_t : 
        call(["evince", path], stdout=sb.DEVNULL, stderr=sb.DEVNULL)
    elif "image" in mime_t:
        call(["eog", path], stdout=sb.DEVNULL, stderr=sb.DEVNULL)
    elif "zip" in mime_t or "tar" in mime_t or "rar" in mime_t:
        call(["file-roller", path], stdout=sb.DEVNULL, stderr=sb.DEVNULL)
    elif "text" in mime_t:
        call(["subl", path])
    elif "audio" in mime_t or "video" in mime_t:
        call(["mplayer", path])
    else:
        print("No configuration for this file. Please, add support for this file in the op script.\n")
        return None

def main():
    ext = ''
    path = sys.argv[1]
    if check_arg(path):
        ext = check_extension_and_open(path)

if __name__ == '__main__':
    main()
